<div class="main-content-wrap shop-page pt-60 pb-60">
  <div class="container">
    <div class="row product-details-inner">
      <div class="col-lg-5 col-md-6">
        <div class="gallery">
          <swiper
            [spaceBetween]="10"
            [navigation]="false"
            [thumbs]="{ swiper: thumbsSwiper }"
            class="mySwiper2 mb-3 w-100">
            <ng-template swiperSlide *ngFor="let image of productItem?.images">
              <img
                [src]="createCloudinaryImageLink(image)"
                alt=""
                class="w-100 border mb-3" />
            </ng-template>
          </swiper>
          <swiper
            (swiper)="thumbsSwiper = $event"
            [loop]="false"
            [spaceBetween]="10"
            [slidesPerView]="slidesPerView"
            [freeMode]="true"
            [watchSlidesProgress]="true"
            class="custome-swiper mb-2 w-100">
            <ng-template
              swiperSlide
              *ngFor="let image of productItem?.images; let index = index">
              <img
                class="image-thumbnail border p-2"
                [src]="createCloudinaryThumbLink(image)"
                alt="" />
            </ng-template>
          </swiper>
        </div>
      </div>

      <div class="col-lg-7 col-md-6">
        <div class="product-details-view-content">
          <div class="product-info">
            <h3 class="mb-2">{{ productItem?.name }}</h3>
            <div class="product-rating d-flex align-items-center">
              <ul class="d-flex">
                <li>
                  <i class="fa-regular fa-star"></i>
                </li>
                <li>
                  <i class="fa-regular fa-star"></i>
                </li>
                <li>
                  <i class="fa-regular fa-star"></i>
                </li>
                <li>
                  <i class="fa-regular fa-star"></i>
                </li>
                <li>
                  <i class="fa-regular fa-star"></i>
                </li>
              </ul>
              <a href="#reviews" class="ms-2"
                >(<span class="count">1</span> đánh giá)</a
              >
            </div>
            <div class="price-box">
              <span class="new-price"
                >{{ selectedPrice?.price | formatPrice }}đ</span
              >
            </div>
            <div class="select-size-box mb-3">
              <h6 class="mb-2">Chọn size</h6>
              <div class="size-list">
                <ng-container *ngIf="productSizes$ | async as productSizes">
                  <div
                    class="position-relative border"
                    *ngFor="let size of productSizes">
                    <input
                      class="select-radio cursor-pointer"
                      type="radio"
                      (change)="onSizeChange(size)"
                      [value]="size"
                      [checked]="size.name === selectedSize" />
                    <label
                      [class.active]="size.name === selectedSize"
                      class="select-label text-size-medium d-flex align-items-center justify-content-center"
                      >{{ size.name }}</label
                    >
                  </div>
                </ng-container>
              </div>
            </div>
            <div class="single-add-to-cart">
              <form
                class="cart-quantity d-flex mb-3"
                [formGroup]="addToCartForm"
                (submit)="onAddToCart()">
                <div class="quantity">
                  <div class="cart-plus-minus">
                    <input
                      formControlName="quantity"
                      appAvoidQuantity
                      type="number"
                      class="input-text"
                      min="1"
                      max="50" />
                  </div>
                </div>
                <button class="add-to-cart" type="submit">Thêm vào giỏ</button>
              </form>
            </div>
            <div class="mb-3" [innerHTML]="productItem?.description"></div>

            <ul class="single-add-actions">
              <li class="add-to-wishlist">
                <a href="wishlist.html"
                  ><i class="fa-regular fa-heart"></i> Thêm vào yêu thích</a
                >
              </li>
            </ul>
            <ul class="stock-cont">
              <li class="product-stock-status">
                Loại sản phẩm: <a href="#">{{ productItem?.categoryName }}</a>
              </li>
              <li class="product-stock-status">
                Thẻ: <a href="#">{{ productItem?.categoryName }}</a>
              </li>
            </ul>
            <div class="share-product-socail-area">
              <p>Chia sẻ sản phẩm</p>
              <ul class="single-product-share">
                <li>
                  <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                </li>
                <li>
                  <a href="#"><i class="fa-brands fa-twitter"></i></a>
                </li>
                <li>
                  <a href="#"><i class="fa-brands fa-pinterest"></i></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="product-description-area mt-60">
      <div class="row">
        <div class="col-lg-12">
          <div class="product-details-tab">
            <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
              <li [ngbNavItem]="1">
                <button ngbNavLink class="text-size-medium">Mô tả</button>
                <ng-template ngbNavContent>
                  <div class="product_description_wrap mt-30">
                    <div class="product_desc mb-30">
                      <p
                        class="mb-3"
                        [innerHTML]="productItem?.description"></p>
                    </div>
                  </div>
                </ng-template>
              </li>
              <li [ngbNavItem]="2">
                <button ngbNavLink class="text-size-medium">Đánh giá</button>
                <ng-template ngbNavContent>
                  <form [formGroup]="ratingForm">
                    <div class="rating_wrap mt-30">
                      <h5 class="rating-title-1 text-size-medium mb-2">
                        Thêm đánh giá
                      </h5>
                      <p class="mb-3">
                        Email của bạn sẽ không bị công khai. Những trường bắt
                        buộc có *
                      </p>
                      <h6 class="rating-title-2 mb-2">Đánh giá của bạn</h6>
                      <div class="row justify-content-center">
                        <div class="rating-wrapper">
                          <input
                            type="radio"
                            id="5-star-rating"
                            name="star"
                            value="5"
                            formControlName="star" />
                          <label for="5-star-rating" class="star-rating">
                            <i class="fas fa-star d-inline-block"></i>
                          </label>

                          <input
                            type="radio"
                            id="4-star-rating"
                            name="star"
                            value="4"
                            formControlName="star" />
                          <label for="4-star-rating" class="star-rating star">
                            <i class="fas fa-star d-inline-block"></i>
                          </label>

                          <input
                            type="radio"
                            id="3-star-rating"
                            name="star"
                            value="3"
                            formControlName="star" />
                          <label for="3-star-rating" class="star-rating star">
                            <i class="fas fa-star d-inline-block"></i>
                          </label>

                          <input
                            type="radio"
                            id="2-star-rating"
                            name="star"
                            value="2"
                            formControlName="star" />
                          <label for="2-star-rating" class="star-rating star">
                            <i class="fas fa-star d-inline-block"></i>
                          </label>

                          <input
                            type="radio"
                            id="1-star-rating"
                            name="star"
                            value="1"
                            formControlName="star" />
                          <label for="1-star-rating" class="star-rating star">
                            <i class="fas fa-star d-inline-block"></i>
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="comments-area comments-reply-area">
                      <div class="row">
                        <div class="col-lg-12">
                          <form action="#" class="comment-form-area">
                            <div class="mt-3 form-group col-md-12">
                              <label class="form-label">Nhận xét</label>
                              <textarea
                                class="form-control"
                                formControlName="content"></textarea>
                            </div>
                            <div class="comment-form-submit mt-3">
                              <input
                                type="submit"
                                value="Gửi"
                                class="comment-submit" />
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </form>
                </ng-template>
              </li>
            </ul>

            <div [ngbNavOutlet]="nav" class="my-2 px-3"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="related-product-area pt-60">
      <div class="row">
        <div class="col-lg-12">
          <div class="section-title">
            <h3 class="text-size-xl">Sản phẩm liên quan</h3>
          </div>
        </div>
        <div class="row product">
          <app-swiper-product
            [slidesPerViewBreakPoint]="5"
            [products]="products"></app-swiper-product>
        </div>
      </div>
    </div>

    <div class="related-product-area pt-60">
      <div class="row">
        <div class="col-lg-12">
          <div class="section-title">
            <h3 class="text-size-xl">Sản phẩm bán chạy</h3>
          </div>
        </div>
      </div>
      <div class="row product">
        <app-swiper-product
          [slidesPerViewBreakPoint]="5"
          [products]="highPopularProduct"></app-swiper-product>
      </div>
    </div>
  </div>
</div>
